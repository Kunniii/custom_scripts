#!/bin/bash

if [ $# -eq 0 ]; then
  echo "Usage: notify <command> [args...]"
  exit 1
fi

cmd="$@"

output=$(bash -c "cd $(pwd) && $cmd" 2>&1 | tee /dev/tty)
exit_code=$?

if [ $exit_code -eq 0 ]; then
  title="Command Completed"
  message="$cmd finished successfully."
else
  title="Command Failed"
  message="$cmd failed with exit code $exit_code. Error: $output"
fi

notify-send "$title" "$message"
